{% extends "base.html" %}
{% load static %}

{% block title %}HaleWay - Plan Vacations, Preserve Memories{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">Welcome to HaleWay</h1>
            <p class="hero-subtitle">Plan vacations and preserve memories with your ohana</p>
            <p class="hero-description">
                Organize activities, create itineraries, track budgets, and rate experiences.
                Share trips with your family and build a searchable archive of your favorite adventures.
            </p>

            {% if user.is_authenticated %}
                {% if active_trip %}
                    <div class="active-trip-badge">
                        {% if active_trip.is_active %}
                            üéâ Current Trip
                        {% else %}
                            ‚úàÔ∏è Upcoming Trip
                        {% endif %}
                    </div>
                {% endif %}
                <div class="hero-actions">
                    <a href="{% url 'families:family_list' %}" class="btn btn-primary btn-lg">
                        View My Families
                    </a>
                    <a href="{% url 'trips:trip_list' %}" class="btn btn-outline btn-lg">
                        View My Trips
                    </a>
                </div>
            {% else %}
                <div class="hero-actions">
                    <a href="{% url 'accounts:register' %}" class="btn btn-primary btn-lg">
                        Get Started
                    </a>
                    <a href="{% url 'accounts:login' %}" class="btn btn-outline btn-lg">
                        Login
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Active Trip Section -->
{% if user.is_authenticated and active_trip %}
<div class="active-trip-section">
    <div class="container">
        <div class="active-trip-card">
            <div class="trip-header">
                <div>
                    <h2 class="trip-name">{{ active_trip.name }}</h2>
                    <p class="trip-destination">üìç {{ active_trip.destination_name }}</p>
                </div>
                <div>
                    <a href="{% url 'trips:trip_detail' active_trip.pk %}" class="btn btn-primary">View Trip Details ‚Üí</a>
                </div>
            </div>

            <div class="trip-dates">
                <div class="date-item">
                    <span class="date-label">Start</span>
                    <span class="date-value">{{ active_trip.start_date|date:"M d, Y" }}</span>
                </div>
                <div class="date-separator">‚Üí</div>
                <div class="date-item">
                    <span class="date-label">End</span>
                    <span class="date-value">{{ active_trip.end_date|date:"M d, Y" }}</span>
                </div>
                <div class="trip-duration">
                    {{ active_trip.duration_days }} day{{ active_trip.duration_days|pluralize }}
                </div>
            </div>

            {% if resort %}
                <div class="resort-quick-info">
                    <h3 class="resort-name">
                        {% if resort.website_url %}
                            <a href="{{ resort.website_url }}" target="_blank" rel="noopener noreferrer">{{ resort.name }} ‚Üó</a>
                        {% else %}
                            {{ resort.name }}
                        {% endif %}
                    </h3>

                    <div class="resort-info-grid">
                        {% if resort.phone_number %}
                            <div class="info-item">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="info-icon">
                                    <path d="M22 16.92V19.92C22 20.4728 21.5523 20.92 21 20.92C9.95 20.92 1 11.97 1 0.92C1 0.367715 1.44772 -0.08 2 -0.08H5C5.55228 -0.08 6 0.367715 6 0.92C6 2.92 6.5 4.92 7.5 6.92C7.61 7.12 7.56 7.37 7.39 7.54L5.21 9.72C6.38 12.06 8.94 14.62 11.28 15.79L13.46 13.61C13.63 13.44 13.88 13.39 14.08 13.5C16.08 14.5 18.08 15 20.08 15C20.6323 15 21.08 15.4477 21.08 16V16.92H22Z" fill="currentColor"/>
                                </svg>
                                <a href="tel:{{ resort.phone_number }}">{{ resort.phone_number }}</a>
                            </div>
                        {% endif %}

                        {% if resort.check_in_time or resort.check_out_time %}
                            <div class="info-item">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="info-icon">
                                    <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
                                </svg>
                                <span>
                                    {% if resort.check_in_time %}In: {{ resort.check_in_time|time:"g:i A" }}{% endif %}
                                    {% if resort.check_in_time and resort.check_out_time %} ‚Ä¢ {% endif %}
                                    {% if resort.check_out_time %}Out: {{ resort.check_out_time|time:"g:i A" }}{% endif %}
                                </span>
                            </div>
                        {% endif %}

                        {% if resort.get_full_address %}
                            <div class="info-item full-width">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="info-icon">
                                    <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z" fill="currentColor"/>
                                </svg>
                                <span>{{ resort.get_full_address }}</span>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endif %}

<!-- Features Section -->
<div class="features">
    <div class="container">
        <h2 class="section-title">Everything You Need for Family Vacations</h2>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                <h3>Family Management</h3>
                <p>Create your family group, invite members, and plan trips together with your ohana.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üèñÔ∏è</div>
                <h3>Trip Planning</h3>
                <p>Organize destinations, dates, resort details, and everything you need for the perfect vacation.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üìù</div>
                <h3>Notes & Ideas</h3>
                <p>Keep track of activities, restaurants, and must-see spots with categorized notes.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üìÖ</div>
                <h3>Itineraries</h3>
                <p>Build day-by-day schedules with activities, reservations, and travel plans.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üí∞</div>
                <h3>Budget Tracking</h3>
                <p>Track estimated and actual costs to stay on budget and plan future trips better.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">‚≠ê</div>
                <h3>Memories</h3>
                <p>Rate experiences, save favorites, and build a searchable archive of your best adventures.</p>
            </div>
        </div>
    </div>
</div>

<!-- CTA Section -->
{% if not user.is_authenticated %}
<div class="cta-section">
    <div class="container">
        <h2>Ready to Start Planning?</h2>
        <p>Create your account and start organizing your next family adventure today.</p>
        <a href="{% url 'accounts:register' %}" class="btn btn-primary btn-lg">
            Create Free Account
        </a>
    </div>
</div>
{% endif %}

<style>
/* Hero Section */
.hero {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
    color: white;
    padding: var(--spacing-xxl) 0;
    margin-top: calc(-1 * var(--spacing-xl));
}

.hero-content {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
}

.hero-title {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-md);
    color: white;
}

.hero-subtitle {
    font-size: 1.5rem;
    margin-bottom: var(--spacing-lg);
    opacity: 0.95;
}

.hero-description {
    font-size: 1.125rem;
    margin-bottom: var(--spacing-xl);
    opacity: 0.9;
    line-height: 1.6;
}

.hero-actions {
    display: flex;
    gap: var(--spacing-md);
    justify-content: center;
    flex-wrap: wrap;
}

.hero .btn-outline {
    background-color: rgba(255, 255, 255, 0.2);
    border-color: white;
    color: white;
}

.hero .btn-outline:hover {
    background-color: white;
    color: var(--primary-color);
}

/* Features Section */
.features {
    padding: var(--spacing-xxl) 0;
    background-color: var(--bg-secondary);
}

.section-title {
    text-align: center;
    font-size: 2rem;
    margin-bottom: var(--spacing-xl);
}

.features-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
}

@media (min-width: 768px) {
    .features-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .hero-title {
        font-size: 3rem;
    }
}

@media (min-width: 992px) {
    .features-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

.feature-card {
    background: white;
    padding: var(--spacing-xl);
    border-radius: var(--border-radius);
    text-align: center;
    box-shadow: var(--shadow-sm);
    transition: transform var(--transition-fast);
}

.feature-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
}

.feature-icon {
    font-size: 3rem;
    margin-bottom: var(--spacing-md);
}

.feature-card h3 {
    margin-bottom: var(--spacing-sm);
    color: var(--primary-color);
}

.feature-card p {
    color: var(--text-secondary);
    line-height: 1.6;
}

/* CTA Section */
.cta-section {
    background: var(--primary-color);
    color: white;
    padding: var(--spacing-xxl) 0;
    text-align: center;
}

.cta-section h2 {
    font-size: 2rem;
    margin-bottom: var(--spacing-md);
    color: white;
}

.cta-section p {
    font-size: 1.125rem;
    margin-bottom: var(--spacing-xl);
    opacity: 0.95;
}

.cta-section .btn {
    background-color: white;
    color: var(--primary-color);
    border-color: white;
}

.cta-section .btn:hover {
    background-color: var(--tertiary-color);
}

/* Active Trip Badge */
.active-trip-badge {
    display: inline-block;
    padding: 0.5rem 1.5rem;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 2rem;
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: var(--spacing-md);
    border: 2px solid rgba(255, 255, 255, 0.3);
}

/* Active Trip Section */
.active-trip-section {
    padding: var(--spacing-xxl) 0;
    background: linear-gradient(135deg, rgba(46, 134, 171, 0.05) 0%, rgba(162, 59, 114, 0.05) 100%);
}

.active-trip-card {
    background: white;
    border-radius: 12px;
    padding: var(--spacing-xl);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 10px 25px rgba(0, 0, 0, 0.08);
}

.trip-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-lg);
    border-bottom: 2px solid var(--gray-200);
}

.trip-name {
    margin: 0 0 var(--spacing-xs);
    font-size: 2rem;
    color: var(--primary-color);
}

.trip-destination {
    margin: 0;
    font-size: 1.25rem;
    color: var(--text-secondary);
}

.trip-dates {
    display: flex;
    align-items: center;
    gap: var(--spacing-lg);
    padding: var(--spacing-lg);
    background: var(--bg-secondary);
    border-radius: var(--border-radius);
    margin-bottom: var(--spacing-lg);
    flex-wrap: wrap;
}

.date-item {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.date-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-secondary);
    font-weight: 600;
}

.date-value {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
}

.date-separator {
    font-size: 1.5rem;
    color: var(--primary-color);
}

.trip-duration {
    margin-left: auto;
    padding: 0.5rem 1rem;
    background: var(--primary-color);
    color: white;
    border-radius: var(--border-radius);
    font-weight: 600;
}

.resort-quick-info {
    padding: var(--spacing-lg);
    background: var(--bg-secondary);
    border-radius: var(--border-radius);
    border-left: 4px solid var(--primary-color);
}

.resort-name {
    margin: 0 0 var(--spacing-md);
    font-size: 1.5rem;
    color: var(--text-primary);
}

.resort-name a {
    color: var(--primary-color);
    text-decoration: none;
}

.resort-name a:hover {
    text-decoration: underline;
}

.resort-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-md);
}

.info-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.info-item.full-width {
    grid-column: 1 / -1;
}

.info-icon {
    color: var(--primary-color);
    flex-shrink: 0;
}

.info-item a {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 500;
}

.info-item a:hover {
    text-decoration: underline;
}

@media (max-width: 768px) {
    .trip-header {
        flex-direction: column;
    }

    .trip-header .btn {
        width: 100%;
    }

    .trip-name {
        font-size: 1.5rem;
    }

    .trip-dates {
        flex-direction: column;
        align-items: stretch;
        gap: var(--spacing-sm);
    }

    .date-separator {
        display: none;
    }

    .trip-duration {
        margin-left: 0;
    }

    .resort-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}
