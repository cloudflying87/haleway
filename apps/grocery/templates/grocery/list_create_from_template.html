{% extends "base.html" %}

{% block title %}Create Grocery List - HaleWay{% endblock %}

{% block content %}
  <div class="container">
    <div class="page-header">
      <h1>Create Grocery List from "{{ template.name }}"</h1>
      <p class="subtitle">Creating a list with {{ template.items.count }} items for {{ trip.name }}</p>
    </div>

    <form method="post" class="form-card">
      {% csrf_token %}

      <div class="form-group">
        <label for="{{ form.name.id_for_label }}">List Name <span class="required">*</span></label>
        {{ form.name }}
        {% if form.name.errors %}
          <div class="form-error">{{ form.name.errors }}</div>
        {% endif %}
      </div>

      <details class="optional-section">
        <summary>Optional Details</summary>
        <div class="optional-fields">
          <div class="form-group">
            <label for="{{ form.assigned_to.id_for_label }}">Assigned To</label>
            {{ form.assigned_to }}
            <small class="form-help">Who is responsible for this shopping trip?</small>
          </div>

          <div class="form-group">
            <label for="{{ form.shopping_date.id_for_label }}">Shopping Date</label>
            {{ form.shopping_date }}
            <small class="form-help">When do you plan to go shopping?</small>
          </div>

          <div class="form-group">
            <label for="{{ form.store_name.id_for_label }}">Store Name</label>
            {{ form.store_name }}
            <small class="form-help">Which store will you shop at?</small>
          </div>
        </div>
      </details>

      <div class="form-actions">
        <a href="{% url 'grocery:trip_grocery_lists' trip.pk %}" class="btn btn-outline">Cancel</a>
        <button type="submit" class="btn btn-primary">Create List</button>
      </div>
    </form>
  </div>

  <style>
    .page-header {
      margin-bottom: 2rem;
    }
    .subtitle {
      color: #666;
      margin-top: 0.5rem;
    }
    .form-card {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      max-width: 600px;
    }
    .form-group {
      margin-bottom: 1.5rem;
    }
    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .required {
      color: #e74c3c;
    }
    .form-help {
      display: block;
      margin-top: 0.25rem;
      font-size: 0.875rem;
      color: #666;
    }
    .form-error {
      color: #e74c3c;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
    .optional-section {
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 1rem;
      margin: 1.5rem 0;
    }
    .optional-section summary {
      cursor: pointer;
      font-weight: 600;
      color: #2E86AB;
      user-select: none;
      list-style: none;
    }
    .optional-section summary::-webkit-details-marker {
      display: none;
    }
    .optional-section summary::before {
      content: "â–¶ ";
      display: inline-block;
      transition: transform 0.2s;
    }
    .optional-section[open] summary::before {
      transform: rotate(90deg);
    }
    .optional-fields {
      margin-top: 1rem;
    }
    .form-actions {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid #e0e0e0;
    }
  </style>
{% endblock %}
