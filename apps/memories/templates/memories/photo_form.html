{% extends 'base.html' %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="container-narrow">
    <div class="page-header">
        <h1>{{ page_title }}</h1>
    </div>

    <form method="post" enctype="multipart/form-data" class="form">
        {% csrf_token %}

        {% if form.non_field_errors %}
            <div class="alert alert-error">
                {{ form.non_field_errors }}
            </div>
        {% endif %}

        <div class="form-group">
            <label for="{{ form.image.id_for_label }}">{{ form.image.label }} <span class="required">*</span></label>
            {{ form.image }}
            {% if form.image.errors %}
                <span class="error">{{ form.image.errors.0 }}</span>
            {% endif %}
            <small class="form-help">Supported formats: JPG, PNG, GIF (max 10MB)</small>
        </div>

        <div class="form-group">
            <label for="{{ form.caption.id_for_label }}">{{ form.caption.label }}</label>
            {{ form.caption }}
            {% if form.caption.errors %}
                <span class="error">{{ form.caption.errors.0 }}</span>
            {% endif %}
            <small class="form-help">{{ form.caption.help_text }}</small>
        </div>

        <div class="form-group">
            <label for="{{ form.taken_date.id_for_label }}">{{ form.taken_date.label }}</label>
            {{ form.taken_date }}
            {% if form.taken_date.errors %}
                <span class="error">{{ form.taken_date.errors.0 }}</span>
            {% endif %}
            <small class="form-help">{{ form.taken_date.help_text }}</small>
        </div>

        <div class="form-group">
            <label for="{{ form.activity.id_for_label }}">{{ form.activity.label }}</label>
            {{ form.activity }}
            {% if form.activity.errors %}
                <span class="error">{{ form.activity.errors.0 }}</span>
            {% endif %}
            <small class="form-help">{{ form.activity.help_text }}</small>
        </div>

        <div class="form-group">
            <label for="{{ form.daily_itinerary.id_for_label }}">{{ form.daily_itinerary.label }}</label>
            {{ form.daily_itinerary }}
            {% if form.daily_itinerary.errors %}
                <span class="error">{{ form.daily_itinerary.errors.0 }}</span>
            {% endif %}
            <small class="form-help">{{ form.daily_itinerary.help_text }}</small>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Photo</button>
            <a href="{% url 'memories:photo_gallery' trip.pk %}" class="btn btn-outline">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
